# ğŸ”™[OpenGL](/docs/opengl/)

## çº¹ç†


## å›¾ç‰‡çš„åŠ è½½

è¿™é‡Œç”¨äº†stbåº“  
https://github.com/nothings/stb  
åªéœ€è¦stb_image.h .c  
cocosä¸­ ä½¿ç”¨äº†png jpgçš„åº“ è‡ªå·±æ¥å°è£…  


## çº¹ç†å¯¹è±¡çš„åˆ›å»º
```
	è¯»å–å›¾ç‰‡  è·å–å®½ é«˜
    int width, height, numComponents;
    unsigned char* data = stbi_load(fileName.c_str(), &width, &height, &numComponents, 4);

    ç”³è¯·çº¹ç†å¯¹è±¡ å¹¶ç»‘å®š
    glGenTextures(1, &_texture);
    glBindTexture(GL_TEXTURE_2D, _texture);

    è®¾ç½®çº¹ç†çš„S Tä¿¡æ¯ æ“ä½œçº¹ç†åæ ‡æ—¶ æ€ä¹ˆé‡‡ç”¨çº¹ç†æ•°æ®
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);
    æ”¾å¤§å’Œç¼©å° é‡‡ç”¨çš„çº¿æ€§è¿‡æ»¤æ–¹å¼
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    ä¼ è¾“çº¹ç†æ•°æ®ç»™opengl å…·è¯´æ ¼å¼ä¼šè½¬ä¸ºå…¶ä»–æ–¹å¼ ä¸”ä¿å­˜åœ¨å†…å­˜ä¸­ è€Œégpu ä»€ä¹ˆæ—¶å€™ä¼ å‘¢ï¼Ÿ
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, 
        GL_RGBA, GL_UNSIGNED_BYTE, data);
    ä¼ è¾“å åŸå§‹å›¾ç‰‡æ•°æ®å°±å¯ä»¥åˆ é™¤äº†  æ‰€ä»¥çº¹ç†å†…å­˜ä¼šæ”¾å¤§2å€ åˆç«‹åˆ»è¿˜åŸ
    jpgç”±äºè¦æƒ³è§£æä¸ºrgbaæ ¼å¼  æ‰€ä»¥ä¼šæ”¾å¤§3å€
    stbi_image_free(data);
```

## çº¹ç†çš„é‡Šæ”¾
```
	glDeleteTextures(1, &_texture);
```
ä¸€èˆ¬åœ¨ææ„ä¸­  å…·è¯´è‹¥ä»¥ä¸‹é‡Šæ”¾å¤ªå¤š openglå¹¶ä¸ä¼šç«‹åˆ»é‡Šæ”¾  è€Œä¼šè¿‡ä¸€ä¼š  
æœ‰ä¸ªäººé‡‡ç”¨å…ˆç¼“å­˜  ç„¶åé€å¸§æ§åˆ¶æ…¢æ…¢é‡Šæ”¾  



## çº¹ç†çš„ä½¿ç”¨
æ¸²æŸ“å‰å…ˆç»‘å®š
```
	glBindTexture(GL_TEXTURE_2D, _texture);
```


## å…¶ä»–ç›¸å…³
1. é¡¶ç‚¹åæ ‡ è¦åŒ…å«çº¹ç†åæ ‡
```
	Vertex(glm::vec3(-0.5, -0.5, 0), glm::vec2(0, 0)), 
```

2. shader linkå‰ ç»‘å®šå±æ€§ç´¢å¼•
```
    glBindAttribLocation(_program, 0, "position");
    glBindAttribLocation(_program, 1, "texCoord");
```
æµ‹è¯•å‘ç°ï¼š  
ä¸ç»‘å®šä¸€æ ·æœ‰æ•ˆæœ ä¼šæ ¹æ®ç€è‰²å™¨ä¸­attributeå®šä¹‰çš„é¡ºåºç»‘å®š  

3. é¡¶ç‚¹ç€è‰²å™¨ä¸­ é‡‡ç”¨varyingæ–¹å¼ è½¬ç»™ç‰‡å…ƒç€è‰²å™¨  ä¸ºäº†çº¿æ€§æ’å€¼
```
    attribute vec2 texCoord;
    varying vec2 texCoord0;
    texCoord0 = texCoord;
```

4. ç‰‡å…ƒç€è‰²å™¨ä¸­ ç”¨çº¹ç†+åæ ‡çš„æ–¹å¼ å†³å®šæœ€ååƒç´ 
```
    uniform sampler2D diffuse;
    varying vec2 texCoord0;
    gl_FragColor = texture2D(diffuse, texCoord0);
```
ç–‘é—®ï¼šsampler2D ä»€ä¹ˆæ—¶å€™ç»‘å®šçš„ï¼Ÿ  åªæœ‰ä¸€ä¸ªçº¹ç†çš„æ—¶å€™ é»˜è®¤ç»‘å®šå”¯ä¸€é‚£ä¸ªsampler2D ï¼Ÿ  
æµ‹è¯•æƒ…å†µï¼š  
è‹¥åªæœ‰glBindTexture(GL_TEXTURE_2D, _texture);  
åˆ™fsä¸­çš„ uniform sampler2D diffuse; å°†è‡ªåŠ¨ç»‘å®š  å¯ä»¥é€šè¿‡åæ ‡è·å–é¢œè‰²  
gl_FragColor = texture2D(diffuse, vec2(0.2,0.2));  

![](7a.jpg)  
çº¹ç†åæ ‡èŒƒå›´ [0,1]   é›¶ç‚¹åœ¨å·¦ä¸‹è§’  






